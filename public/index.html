<!doctype html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vereinskalender 2026</title>
  <link rel="stylesheet" href="styles.css" />
  <script defer src="app.js"></script>
</head>
<body class="th-bg-page">
  <header class="th-header">
    <div class="th-header__title">Kalender 2026</div>
    <nav class="th-header__nav" aria-label="Navigation">
      <span class="th-header__nav-link">Drag &amp; Drop</span>
      <span class="th-header__nav-link">JSON-basiert</span>
      <span class="th-header__live-pill">A4 Querformat</span>
    </nav>
  </header>

  <main class="th-container th-mt-md">
    <section class="th-bg-surface th-border th-mb-md control-panel">
      <div class="control-row">
        <div class="control-group month-nav">
          <label for="month-select">Monat wählen</label>
          <div class="month-nav__controls">
            <button id="btn-prev-month" class="th-btn th-btn-secondary month-nav__btn" aria-label="Vorheriger Monat">&#8592;</button>
            <select id="month-select" class="control-input control-input--compact"></select>
            <button id="btn-next-month" class="th-btn th-btn-secondary month-nav__btn" aria-label="Nächster Monat">&#8594;</button>
          </div>
        </div>
        <div class="control-group">
          <label for="filter-category">Kategorie filtern</label>
          <select id="filter-category" class="control-input">
            <option value="all">Alle Kategorien</option>
          </select>
        </div>
        <div class="control-buttons">
          <button id="btn-add-fresh" class="th-btn">Neu anlegen</button>
          <button id="btn-print-month" class="th-btn th-btn-secondary">Monat drucken</button>
          <button id="btn-print-year" class="th-btn th-btn-secondary">Ganzes Jahr drucken</button>
        </div>
      </div>
      <p class="th-text-muted info-hint">Alle Daten liegen serverseitig in <code>data/events_2026.json</code>. Änderungen werden sofort gespeichert, Drag &amp; Drop verschiebt komplette Terminblöcke.</p>
    </section>

    <section class="layout" id="layout">
      <div class="calendar-area th-bg-surface th-border">
        <div class="th-flex-between th-mb-md">
          <div>
            <p class="th-text-muted">Jahr 2026</p>
            <h2 id="month-title">Januar 2026</h2>
          </div>
          <div class="legend" aria-label="Farblegende"></div>
        </div>
        <div class="calendar-wrapper">
          <table id="calendar-table" class="calendar-table" aria-label="Monatskalender"></table>
        </div>
      </div>

      <aside class="side-panel th-bg-surface th-border" id="side-panel">
        <div id="event-details" class="panel-section">
          <div class="panel-header">
            <p class="th-text-muted">Termin-Details</p>
            <button type="button" id="btn-close-details" class="th-btn th-btn--ghost">Schließen</button>
          </div>
          <h3 id="details-title">Termin wählen</h3>
          <p id="details-dates" class="th-text-muted"></p>
          <div class="details-meta">
            <span id="details-category" class="details-tag">Kategorie</span>
            <span id="details-range" class="details-tag details-tag--muted"></span>
          </div>
          <p id="details-description" class="details-description th-mt-sm">Wähle einen Termin für Details.</p>
          <div class="details-actions">
            <button id="btn-details-edit" class="th-btn">Bearbeiten</button>
          </div>
        </div>

        <div class="event-list th-mt-md">
          <h4>Alle Termine</h4>
          <ul id="event-list" class="event-list__items"></ul>
          <button id="btn-download" class="th-btn th-btn-secondary">Aktuelle JSON herunterladen</button>
        </div>
      </aside>
    </section>

    <div class="form-overlay" id="form-overlay" role="dialog" aria-modal="true" aria-labelledby="form-title">
      <div id="form-panel" class="form-modal">
        <div class="panel-header">
          <h3 id="form-title">Termin hinzufügen</h3>
          <button type="button" id="btn-close-form" class="th-btn th-btn--ghost">Schließen</button>
        </div>
        <form id="event-form" class="event-form">
          <label for="title">Titel</label>
          <input id="title" name="title" type="text" required />

          <label for="description">Beschreibung</label>
          <textarea id="description" name="description" rows="3"></textarea>

          <div class="two-col">
            <div>
              <label for="start-date">Beginn</label>
              <input id="start-date" name="start-date" type="date" required />
            </div>
            <div>
              <label for="end-date">Ende</label>
              <input id="end-date" name="end-date" type="date" required />
            </div>
          </div>

          <div class="two-col">
            <div>
              <label for="category">Kategorie</label>
              <select id="category" name="category" required></select>
            </div>
            <div>
              <label for="color">Farbe</label>
              <input id="color" name="color" type="color" value="#0F4C81" />
            </div>
          </div>

          <div class="form-actions">
            <button type="submit" class="th-btn">Speichern</button>
            <button type="button" id="btn-reset" class="th-btn th-btn-secondary">Abbrechen</button>
            <button type="button" id="btn-delete" class="th-btn th-btn-danger" aria-live="polite">Löschen</button>
          </div>
        </form>
      </div>
    </div>

    <section id="year-print" class="year-print"></section>
  </main>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>
</body>
</html>
